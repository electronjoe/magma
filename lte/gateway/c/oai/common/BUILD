package(default_visibility = ["//visibility:public"])

# TODO: Break apart circular build dependencies in this block?
cc_library(
    name = "common",
    srcs = [
        "3gpp_24.008_common_ies.c",
        "3gpp_24.008_gprs_common_ies.c",
        "3gpp_24.008_mm_ies.c",
        "3gpp_24.008_sm_ies.c",
        "TLVDecoder.c",
        "TLVEncoder.c",
        "async_system.c",
        "backtrace.c",
        "common_types.c",
        "dynamic_memory_check.c",
        "glogwrapper/glog_logging.cpp",
        "hashtable.c",
        "intertask_interface.c",
        "itti_free_defined_msg.c",
        "log.c",
        "shared_ts_log.c",
        "signals.c",
        "timer.c",
    ],
    hdrs = [
        "3gpp_23.003.h",
        "3gpp_24.007.h",
        "3gpp_24.008.h",
        "3gpp_24.301.h",
        "3gpp_29.274.h",
        "3gpp_33.401.h",
        "3gpp_36.331.h",
        "3gpp_36.401.h",
        "3gpp_36.413.h",
        "TLVDecoder.h",
        "TLVEncoder.h",
        "TrackingAreaIdentity.h",
        "assertions.h",
        "async_system.h",
        "async_system_messages_def.h",
        "async_system_messages_types.h",
        "backtrace.h",
        "common_defs.h",
        "common_ies.h",
        "common_types.h",
        "dynamic_memory_check.h",
        "glogwrapper/glog_logging.h",
        "gtpv1_u_messages_def.h",
        "gtpv1_u_messages_types.h",
        "gx_messages_def.h",
        "gx_messages_types.h",
        "ha_messages_def.h",
        "ha_messages_types.h",
        "hashtable.h",
        "intertask_interface.h",
        "intertask_interface_conf.h",
        "intertask_interface_init.h",
        "intertask_interface_types.h",
        "intertask_messages_def.h",
        "intertask_messages_types.h",
        "ip_forward_messages_def.h",
        "ip_forward_messages_types.h",
        "itti_free_defined_msg.h",
        "itti_types.h",
        "log.h",
        "messages_def.h",
        "messages_types.h",
        "mme_app_messages_def.h",
        "mme_app_messages_types.h",
        "nas/as_message.h",
        "nas/networkDef.h",
        "nas/securityDef.h",
        "queue.h",
        "s11_messages_def.h",
        "s11_messages_types.h",
        "s1ap_messages_def.h",
        "s1ap_messages_types.h",
        "s6a_messages_def.h",
        "s6a_messages_types.h",
        "sctp_messages_def.h",
        "sctp_messages_types.h",
        "security_types.h",
        "service303_messages_def.h",
        "service303_messages_types.h",
        "sgs_messages_def.h",
        "sgs_messages_types.h",
        "sgw_ie_defs.h",
        "shared_ts_log.h",
        "signals.h",
        "tasks_def.h",
        "timer.h",
        "timer_messages_def.h",
        "timer_messages_types.h",
        "udp_messages_def.h",
        "udp_messages_types.h",
    ],
    includes = ["."],
    linkopts = [
        "-lczmq",  # Assumes build host availability
        "-lrt",  # Linux timer API
    ],
    deps = [
        ":gcc_diag",
        "//c/oai/include:nas",
        "//c/oai/lib/bstr",
        "@glog",
        "@liblfds-lib//:liblfds",
    ],
)

cc_library(
    name = "gcc_diag",
    hdrs = ["gcc_diag.h"],
    includes = ["."],
)
